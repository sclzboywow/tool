{% extends "base.html" %}

{% block title %}不同形状物体惯量计算 - 电机电力电气计算工具站{% endblock %}

{% block content %}
<div class="page-header">
    <h1>不同形状物体惯量计算</h1>
    <p class="subtitle">计算不同形状物体的转动惯量，包括圆柱体（平行/垂直）、方形物体、饼状物体、直线运动物体和直接惯量计算等6种计算模块，基于标准物理原理（转动惯量理论和平行轴定理）</p>
</div>

<!-- 参考说明表格 -->
<div class="reference-table" style="background: #e8f5e9; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; border: 1px solid #c8e6c9;">
    <div style="display: grid; grid-template-columns: 1fr 4px 1fr; gap: 1.5rem; align-items: start;">
        <!-- 左侧：变量说明 -->
        <div>
            <h3 style="color: #2c3e50; margin-bottom: 1rem; font-size: 1.1rem; font-weight: 600;">变量说明</h3>
            <table style="width: 100%; border-collapse: collapse;">
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500; width: 60px;">J<sub>0</sub></td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">x<sub>0</sub>轴（通过重心的轴）的惯性惯量</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">[kg·m²]</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">J<sub>x</sub></td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">x轴的惯性惯量</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">[kg·m²]</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">J<sub>y</sub></td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">y轴的惯性惯量</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">[kg·m²]</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">m</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">质量</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">(kg)</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">d<sub>0</sub></td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">外径</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">(m)</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">d<sub>1</sub></td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">内径</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">(m)</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">l</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">长度</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">(m)</td>
                </tr>
            </table>
        </div>
        
        <!-- 中间分隔线 -->
        <div style="background: #4caf50; width: 4px; height: 100%; border-radius: 2px;"></div>
        
        <!-- 右侧：材料属性 -->
        <div>
            <h3 style="color: #2c3e50; margin-bottom: 1rem; font-size: 1.1rem; font-weight: 600;">材料属性</h3>
            <table style="width: 100%; border-collapse: collapse;">
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">铁</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem; text-align: right;">7.9 × 10³ kg/m³</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">铝</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem; text-align: right;">2.8 × 10³ kg/m³</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">黄铜</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem; text-align: right;">8.5 × 10³ kg/m³</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">尼龙</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem; text-align: right;">1.1 × 10³ kg/m³</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">π</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem; text-align: right;">3.14159</td>
                </tr>
            </table>
        </div>
    </div>
    
    <!-- 底部说明 -->
    <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #c8e6c9; text-align: right;">
        <span style="color: #e74c3c; font-size: 0.9rem; font-weight: 500;">注: *为必填项</span>
    </div>
</div>

<!-- 标签页 -->
<div class="sub-tabs-container">
    <div id="sub-tabs-inertia" class="sub-tabs active">
        <button class="sub-tab active" onclick="switchSubTab('cylinder_parallel')">1. 圆柱体（平行）</button>
        <button class="sub-tab" onclick="switchSubTab('cylinder_perpendicular')">2. 圆柱体（垂直）</button>
        <button class="sub-tab" onclick="switchSubTab('rectangular')">3. 方形物体</button>
        <button class="sub-tab" onclick="switchSubTab('disk')">4. 饼状物体</button>
        <button class="sub-tab" onclick="switchSubTab('linear_motion')">5. 直线运动</button>
        <button class="sub-tab" onclick="switchSubTab('direct_inertia')">6. 直接惯量</button>
    </div>
</div>

<!-- 1. 圆柱体惯量计算（平行） -->
<div id="cylinder_parallel" class="tab-content active">
    <div class="tool-form">
        <h2>圆柱体惯量计算（平行）</h2>
        <p class="formula-info">公式: J = (π/32) × ρ × L × (d<sub>0</sub>⁴ - d<sub>1</sub>⁴) + m × e²</p>
        <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 1rem; padding: 0.75rem; background: #e8f4f8; border-left: 4px solid #3498db; border-radius: 4px;">
            <strong>物理来源：</strong><br>
            1. 空心圆柱体绕中心轴的转动惯量：J0 = (π/32) × ρ × L × (d0⁴ - d1⁴)<br>
            2. 平行轴定理：J = J0 + m × e²<br>
            <strong>适用范围：</strong>圆柱体长度方向中心线和旋转中心线平行<br>
            <strong>材料密度参考：</strong>铁: 7.9×10³ kg/m³, 铝: 2.8×10³ kg/m³, 黄铜: 8.5×10³ kg/m³, 尼龙: 1.1×10³ kg/m³
        </p>
        
        <div class="form-group">
            <label for="cp_d0">外径 d0 (mm) <span class="required">*</span></label>
            <input type="number" id="cp_d0" step="0.01" min="0.01" placeholder="例如: 200">
        </div>
        
        <div class="form-group">
            <label for="cp_d1">内径 d1 (mm) <span class="required">*</span></label>
            <input type="number" id="cp_d1" step="0.01" min="0" value="0" placeholder="例如: 100 (0表示实心)">
            <small>输入0表示实心圆柱体</small>
        </div>
        
        <div class="form-group">
            <label for="cp_L">长度 L (mm) <span class="required">*</span></label>
            <input type="number" id="cp_L" step="0.01" min="0.01" placeholder="例如: 400">
        </div>
        
        <div class="form-group">
            <label for="cp_rho">密度 ρ (kg/m³) <span class="required">*</span></label>
            <input type="number" id="cp_rho" step="0.1" min="0.1" placeholder="例如: 7800 (铁)">
            <small>铁: 7800, 铝: 2800, 黄铜: 8500, 尼龙: 1100</small>
        </div>
        
        <div class="form-group">
            <label for="cp_e">重心线与旋转轴线距离 e (mm) <span class="required">*</span></label>
            <input type="number" id="cp_e" step="0.01" min="0" value="0" placeholder="例如: 100">
            <small>如果旋转轴通过重心，输入0</small>
        </div>
        
        <button class="btn btn-primary" onclick="calculateCylinderParallel()">计算</button>
        
        <div id="cp_result" class="result-box" style="display: none;">
            <h3>计算结果</h3>
            <div class="result-value">质量: <span id="cp_mass"></span> kg</div>
            <div class="result-value">惯量: <span id="cp_result_value"></span> <span id="cp_result_unit"></span></div>
            <div class="result-formula" id="cp_result_formula"></div>
        </div>
    </div>
</div>

<!-- 2. 圆柱体惯量计算（垂直） -->
<div id="cylinder_perpendicular" class="tab-content">
    <div class="tool-form">
        <h2>圆柱体惯量计算（垂直）</h2>
        <p class="formula-info">公式: J = (1/4) × m × ((d<sub>0</sub>²+d<sub>1</sub>²)/4 + L²/3) + m × e²</p>
        <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 1rem; padding: 0.75rem; background: #e8f4f8; border-left: 4px solid #3498db; border-radius: 4px;">
            <strong>物理来源：</strong><br>
            1. 空心圆柱体绕垂直轴的转动惯量（通过中心，垂直于长度方向）<br>
            组合公式：J0 = (1/4) × m × ((d0²+d1²)/4 + L²/3)<br>
            2. 平行轴定理：J = J0 + m × e²<br>
            <strong>适用范围：</strong>圆柱体长度方向中心线和旋转中心线垂直
        </p>
        
        <div class="form-group">
            <label for="cperp_d0">外径 d0 (mm) <span class="required">*</span></label>
            <input type="number" id="cperp_d0" step="0.01" min="0.01" placeholder="例如: 200">
        </div>
        
        <div class="form-group">
            <label for="cperp_d1">内径 d1 (mm) <span class="required">*</span></label>
            <input type="number" id="cperp_d1" step="0.01" min="0" value="0" placeholder="例如: 100 (0表示实心)">
            <small>输入0表示实心圆柱体</small>
        </div>
        
        <div class="form-group">
            <label for="cperp_L">长度 L (mm) <span class="required">*</span></label>
            <input type="number" id="cperp_L" step="0.01" min="0.01" placeholder="例如: 400">
        </div>
        
        <div class="form-group">
            <label for="cperp_rho">密度 ρ (kg/m³) <span class="required">*</span></label>
            <input type="number" id="cperp_rho" step="0.1" min="0.1" placeholder="例如: 7800 (铁)">
        </div>
        
        <div class="form-group">
            <label for="cperp_e">重心线与旋转轴线距离 e (mm) <span class="required">*</span></label>
            <input type="number" id="cperp_e" step="0.01" min="0" value="0" placeholder="例如: 100">
        </div>
        
        <button class="btn btn-primary" onclick="calculateCylinderPerpendicular()">计算</button>
        
        <div id="cperp_result" class="result-box" style="display: none;">
            <h3>计算结果</h3>
            <div class="result-value">质量: <span id="cperp_mass"></span> kg</div>
            <div class="result-value">惯量: <span id="cperp_result_value"></span> <span id="cperp_result_unit"></span></div>
            <div class="result-formula" id="cperp_result_formula"></div>
        </div>
    </div>
</div>

<!-- 3. 方形物体惯量计算 -->
<div id="rectangular" class="tab-content">
    <div class="tool-form">
        <h2>方形物体惯量计算</h2>
        <p class="formula-info">公式: J = (1/12) × m × (x² + y²) + m × e²</p>
        <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 1rem; padding: 0.75rem; background: #e8f4f8; border-left: 4px solid #3498db; border-radius: 4px;">
            <strong>物理来源：</strong><br>
            1. 长方体绕通过重心的轴的转动惯量：J0 = (1/12) × m × (a²+b²)<br>
            其中a、b是垂直于旋转轴的边长<br>
            2. 平行轴定理：J = J0 + m × e²<br>
            <strong>适用范围：</strong>长方体（方形物体）惯量计算
        </p>
        
        <div class="form-group">
            <label for="rect_x">长度 x (mm) <span class="required">*</span></label>
            <input type="number" id="rect_x" step="0.01" min="0.01" placeholder="例如: 50">
        </div>
        
        <div class="form-group">
            <label for="rect_y">宽度 y (mm) <span class="required">*</span></label>
            <input type="number" id="rect_y" step="0.01" min="0.01" placeholder="例如: 10">
        </div>
        
        <div class="form-group">
            <label for="rect_z">高度 z (mm) <span class="required">*</span></label>
            <input type="number" id="rect_z" step="0.01" min="0.01" placeholder="例如: 1">
        </div>
        
        <div class="form-group">
            <label for="rect_rho">密度 ρ (kg/m³) <span class="required">*</span></label>
            <input type="number" id="rect_rho" step="0.1" min="0.1" placeholder="例如: 7800 (铁)">
        </div>
        
        <div class="form-group">
            <label for="rect_e">重心线与旋转轴线距离 e (mm) <span class="required">*</span></label>
            <input type="number" id="rect_e" step="0.01" min="0" value="0" placeholder="例如: 10">
        </div>
        
        <button class="btn btn-primary" onclick="calculateRectangular()">计算</button>
        
        <div id="rect_result" class="result-box" style="display: none;">
            <h3>计算结果</h3>
            <div class="result-value">质量: <span id="rect_mass"></span> kg</div>
            <div class="result-value">惯量: <span id="rect_result_value"></span> <span id="rect_result_unit"></span></div>
            <div class="result-formula" id="rect_result_formula"></div>
        </div>
    </div>
</div>

<!-- 4. 饼状物体惯量计算 -->
<div id="disk" class="tab-content">
    <div class="tool-form">
        <h2>饼状物体惯量计算</h2>
        <p class="formula-info">公式: J = (1/8) × m × d² + m × e²</p>
        <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 1rem; padding: 0.75rem; background: #e8f4f8; border-left: 4px solid #3498db; border-radius: 4px;">
            <strong>物理来源：</strong><br>
            1. 实心圆柱体绕中心轴的转动惯量：J0 = (1/2) × m × R² = (1/8) × m × d²<br>
            2. 平行轴定理：J = J0 + m × e²<br>
            <strong>适用范围：</strong>实心圆柱体（饼状）惯量计算
        </p>
        
        <div class="form-group">
            <label for="disk_d">直径 d (mm) <span class="required">*</span></label>
            <input type="number" id="disk_d" step="0.01" min="0.01" placeholder="例如: 380">
        </div>
        
        <div class="form-group">
            <label for="disk_h">厚度 h (mm) <span class="required">*</span></label>
            <input type="number" id="disk_h" step="0.01" min="0.01" placeholder="例如: 30">
        </div>
        
        <div class="form-group">
            <label for="disk_rho">密度 ρ (kg/m³) <span class="required">*</span></label>
            <input type="number" id="disk_rho" step="0.1" min="0.1" placeholder="例如: 7800 (铁)">
        </div>
        
        <div class="form-group">
            <label for="disk_e">重心线与旋转轴线距离 e (mm) <span class="required">*</span></label>
            <input type="number" id="disk_e" step="0.01" min="0" value="0" placeholder="例如: 10">
        </div>
        
        <button class="btn btn-primary" onclick="calculateDisk()">计算</button>
        
        <div id="disk_result" class="result-box" style="display: none;">
            <h3>计算结果</h3>
            <div class="result-value">质量: <span id="disk_mass"></span> kg</div>
            <div class="result-value">惯量: <span id="disk_result_value"></span> <span id="disk_result_unit"></span></div>
            <div class="result-formula" id="disk_result_formula"></div>
        </div>
    </div>
</div>

<!-- 5. 直线运动物体惯量计算 -->
<div id="linear_motion" class="tab-content">
    <div class="tool-form">
        <h2>直线运动物体惯量计算</h2>
        <p class="formula-info">公式: J = m × (A/(2π))²</p>
        <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 1rem; padding: 0.75rem; background: #e8f4f8; border-left: 4px solid #3498db; border-radius: 4px;">
            <strong>物理来源：</strong><br>
            将直线运动转换为旋转运动，等效惯量 = m × r²<br>
            其中 r = A/(2π) 是等效半径（电机每转1圈，物体移动A距离）<br>
            <strong>适用范围：</strong>将直线运动转换为旋转惯量
        </p>
        
        <div class="form-group">
            <label for="lm_A">电机每转1圈物体直线运动量 A (mm) <span class="required">*</span></label>
            <input type="number" id="lm_A" step="0.01" min="0.01" placeholder="例如: 100">
        </div>
        
        <div class="form-group">
            <label for="lm_m">物体质量 m (kg) <span class="required">*</span></label>
            <input type="number" id="lm_m" step="0.01" min="0.01" placeholder="例如: 100">
        </div>
        
        <button class="btn btn-primary" onclick="calculateLinearMotion()">计算</button>
        
        <div id="lm_result" class="result-box" style="display: none;">
            <h3>计算结果</h3>
            <div class="result-value">惯量: <span id="lm_result_value"></span> <span id="lm_result_unit"></span></div>
            <div class="result-formula" id="lm_result_formula"></div>
        </div>
    </div>
</div>

<!-- 6. 直接惯量计算 -->
<div id="direct_inertia" class="tab-content">
    <div class="tool-form">
        <h2>直接惯量计算</h2>
        <p class="formula-info">公式: J<sub>1</sub> = J<sub>0</sub> + m × (e/10)² = J<sub>0</sub> + m × e²/100</p>
        <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 1rem; padding: 0.75rem; background: #e8f4f8; border-left: 4px solid #3498db; border-radius: 4px;">
            <strong>物理来源：</strong><br>
            平行轴定理（Steiner定理）：J1 = J0 + m × d²<br>
            其中J0是绕重心的惯量，d是两轴之间的距离<br>
            注意：e的单位是mm，需要转换为cm：e(cm) = e(mm)/10<br>
            <strong>适用范围：</strong>已知惯量J0和质量m，计算平移后的惯量J1
        </p>
        
        <div class="form-group">
            <label for="di_J0">惯量 J0 (kg·cm²) <span class="required">*</span></label>
            <input type="number" id="di_J0" step="0.01" min="0.01" placeholder="例如: 10">
        </div>
        
        <div class="form-group">
            <label for="di_m">质量 m (kg) <span class="required">*</span></label>
            <input type="number" id="di_m" step="0.01" min="0.01" placeholder="例如: 20">
        </div>
        
        <div class="form-group">
            <label for="di_e">重心线与旋转轴线距离 e (mm) <span class="required">*</span></label>
            <input type="number" id="di_e" step="0.01" min="0" placeholder="例如: 10">
        </div>
        
        <button class="btn btn-primary" onclick="calculateDirectInertia()">计算</button>
        
        <div id="di_result" class="result-box" style="display: none;">
            <h3>计算结果</h3>
            <div class="result-value">质量: <span id="di_mass"></span> kg</div>
            <div class="result-value">惯量: <span id="di_result_value"></span> <span id="di_result_unit"></span></div>
            <div class="result-formula" id="di_result_formula"></div>
        </div>
    </div>
</div>

<script src="{{ static_asset('js/tools/inertia_calc.js') }}"></script>
{% endblock %}

