{% extends "base.html" %}

{% block title %}丝杠水平运动选型计算 - 电机电力电气计算工具站{% endblock %}

{% block content %}
<div class="page-header">
    <h1>丝杠水平运动选型计算</h1>
    <p class="subtitle">计算丝杠水平运动系统的电机选型参数，包括速度曲线、电机转速、负荷转矩、加速转矩、必须转矩和惯量比等参数</p>
</div>

<!-- 参数说明表格 -->
<div class="reference-table" style="background: #e8f5e9; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; border: 1px solid #c8e6c9;">
    <div style="display: grid; grid-template-columns: 1fr 4px 1fr; gap: 1.5rem; align-items: start;">
        <!-- 左侧：机械结构参数说明 -->
        <div>
            <h3 style="color: #2c3e50; margin-bottom: 1rem; font-size: 1.1rem; font-weight: 600;">机械结构参数说明</h3>
            <table style="width: 100%; border-collapse: collapse;">
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500; width: 80px;">Vl</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">速度</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">(m/min)</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">M</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">滑动部分质量</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">(kg)</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">LB</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">丝杠长度</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">(m)</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">DB</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">丝杠直径</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">(m)</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">PB</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">丝杠导程</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">(m)</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">MC</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">连轴器质量</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">(kg)</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">DC</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">连轴器直径</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">(m)</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">μ</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">摩擦系数</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;"></td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">L</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">移动距离</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">(m)</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">η</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">机械效率</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;"></td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">t</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">定位时间</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">(s)</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">A</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">加减速时间比</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;"></td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">FA</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">外力</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">(N)</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">a</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">移动方向与水平轴夹角</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">(°)</td>
                </tr>
            </table>
        </div>
        
        <!-- 中间分隔线 -->
        <div style="background: #4caf50; width: 4px; height: 100%; border-radius: 2px;"></div>
        
        <!-- 右侧：其他常数和电机参数 -->
        <div>
            <h3 style="color: #2c3e50; margin-bottom: 1rem; font-size: 1.1rem; font-weight: 600;">其他常数</h3>
            <table style="width: 100%; border-collapse: collapse; margin-bottom: 1.5rem;">
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">G</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem; text-align: right;">9.8 m/s²</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">π</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem; text-align: right;">3.1416</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">ρ</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem; text-align: right;">7900 kg/m³</td>
                </tr>
            </table>
            
            <h3 style="color: #2c3e50; margin-bottom: 1rem; font-size: 1.1rem; font-weight: 600;">电机参数</h3>
            <table style="width: 100%; border-collapse: collapse;">
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">S</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">安全系数</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">(通常1-2)</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">JM</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">电机惯量</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;">(kg·m²)</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">i</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.95rem;">减速机减速比</td>
                    <td style="padding: 0.5rem 0; color: #7f8c8d; font-size: 0.9rem; text-align: right;"></td>
                </tr>
            </table>
        </div>
    </div>
    
    <!-- 底部说明 -->
    <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #c8e6c9; text-align: right;">
        <span style="color: #e74c3c; font-size: 0.9rem; font-weight: 500;">注: *为必填项</span>
    </div>
</div>

<!-- 标签页 -->
<div class="sub-tabs-container">
    <div id="sub-tabs-screw" class="sub-tabs active">
        <button class="sub-tab active" onclick="switchSubTab('speed_curve')">1. 速度曲线</button>
        <button class="sub-tab" onclick="switchSubTab('motor_speed')">2. 电机转速</button>
        <button class="sub-tab" onclick="switchSubTab('load_torque')">3. 负荷转矩</button>
        <button class="sub-tab" onclick="switchSubTab('acceleration_torque')">4. 加速转矩</button>
        <button class="sub-tab" onclick="switchSubTab('required_torque')">5. 必须转矩</button>
        <button class="sub-tab" onclick="switchSubTab('motor_selection')">6. 电机选择</button>
        <button class="sub-tab" onclick="switchSubTab('inertia_ratio_motor')">7. 惯量比(电机)</button>
        <button class="sub-tab" onclick="switchSubTab('inertia_ratio_reducer')">8. 惯量比(减速机)</button>
    </div>
</div>

<!-- 1. 速度曲线 -->
<div id="speed_curve" class="tab-content active">
    <div class="tool-form">
        <h2>速度曲线 - 加速时间计算</h2>
        <p class="formula-info">公式: t<sub>0</sub> = t × A</p>
        <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 1rem; padding: 0.75rem; background: #e8f4f8; border-left: 4px solid #3498db; border-radius: 4px;">
            <strong>物理来源：</strong>基于运动学中的速度曲线分析。在梯形速度曲线中，定位时间t由加速时间、匀速时间和减速时间组成。加减速时间比A表示加速时间占定位时间的比例，因此加速时间t₀ = t × A。这是标准运动控制理论。<br>
            <strong>适用范围：</strong>适用于梯形速度曲线的运动控制系统，用于计算加速阶段所需的时间。
        </p>
        
        <div class="form-group">
            <label for="sc_t">定位时间 t (s) <span class="required">*</span></label>
            <input type="number" id="sc_t" step="0.01" min="0.01" placeholder="例如: 1.0">
        </div>
        
        <div class="form-group">
            <label for="sc_A">加减速时间比 A <span class="required">*</span></label>
            <input type="number" id="sc_A" step="0.01" min="0" max="1" value="0.25" placeholder="例如: 0.25">
            <small>通常范围: 0-1</small>
        </div>
        
        <button class="btn btn-primary" onclick="calculateSpeedCurve()">计算</button>
        
        <div id="sc_result" class="result-box" style="display: none;">
            <h3>计算结果</h3>
            <div class="result-value"><span id="sc_result_value"></span> <span id="sc_result_unit"></span></div>
            <div class="result-formula" id="sc_result_formula"></div>
        </div>
    </div>
</div>

<!-- 2. 电机转速 -->
<div id="motor_speed" class="tab-content">
    <div class="tool-form">
        <h2>电机转速计算</h2>
        <p class="formula-info">公式: N<sub>M</sub> = V<sub>l</sub> / P<sub>B</sub></p>
        <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 1rem; padding: 0.75rem; background: #e8f4f8; border-left: 4px solid #3498db; border-radius: 4px;">
            <strong>物理来源：</strong>基于丝杠传动的运动学关系。丝杠导程P<sub>B</sub>表示丝杠每转一圈，负载移动的距离。当负载以速度V<sub>l</sub>移动时，电机转速N<sub>M</sub> = V<sub>l</sub> / P<sub>B</sub>。这是标准机械传动公式，来源于丝杠传动的几何关系。<br>
            <strong>适用范围：</strong>适用于滚珠丝杠、梯形丝杠等直线传动系统，用于根据负载移动速度确定电机转速。
        </p>
        
        <div class="form-group">
            <label for="ms_Vl">速度 V<sub>l</sub> (m/min) <span class="required">*</span></label>
            <input type="number" id="ms_Vl" step="0.01" min="0.01" placeholder="例如: 10">
        </div>
        
        <div class="form-group">
            <label for="ms_PB">丝杠导程 P<sub>B</sub> (m) <span class="required">*</span></label>
            <input type="number" id="ms_PB" step="0.0001" min="0.0001" placeholder="例如: 0.01">
        </div>
        
        <button class="btn btn-primary" onclick="calculateMotorSpeed()">计算</button>
        
        <div id="ms_result" class="result-box" style="display: none;">
            <h3>计算结果</h3>
            <div class="result-value"><span id="ms_result_value"></span> <span id="ms_result_unit"></span></div>
            <div class="result-formula" id="ms_result_formula"></div>
        </div>
    </div>
</div>

<!-- 3. 负荷转矩计算 -->
<div id="load_torque" class="tab-content">
    <div class="tool-form">
        <h2>负荷转矩计算</h2>
        <p class="formula-info">轴向负载: F = F<sub>A</sub> + M×G×(sin a + μ×cos a)</p>
        <p class="formula-info">负载转矩: T<sub>L</sub> = (F × P<sub>B</sub>) / (2π × η)</p>
        <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 1rem; padding: 0.75rem; background: #e8f4f8; border-left: 4px solid #3498db; border-radius: 4px;">
            <strong>物理来源：</strong>基于牛顿第二定律和丝杠传动的力学关系。轴向负载F由外力F<sub>A</sub>、重力分量M×G×sin a（沿运动方向）和摩擦力M×G×μ×cos a（垂直于运动方向）组成，即F = F<sub>A</sub> + M×G×(sin a + μ×cos a)。负载转矩T<sub>L</sub>是将轴向力转换为旋转转矩，基于丝杠传动的能量转换关系：T<sub>L</sub> = (F × P<sub>B</sub>) / (2π × η)，其中η为机械效率。这是标准机械传动和摩擦学公式。<br>
            <strong>适用范围：</strong>适用于丝杠传动系统，考虑重力、摩擦和机械效率的负载转矩计算。
        </p>
        
        <div class="form-group">
            <label for="lt_FA">外力 F<sub>A</sub> (N) <span class="required">*</span></label>
            <input type="number" id="lt_FA" step="0.01" min="0" value="0" placeholder="例如: 0">
        </div>
        
        <div class="form-group">
            <label for="lt_M">滑动部分质量 M (kg) <span class="required">*</span></label>
            <input type="number" id="lt_M" step="0.01" min="0.01" placeholder="例如: 10">
        </div>
        
        <div class="form-group">
            <label for="lt_a">移动方向与水平轴夹角 a (°) <span class="required">*</span></label>
            <input type="number" id="lt_a" step="0.1" min="-90" max="90" value="0" placeholder="例如: 0">
        </div>
        
        <div class="form-group">
            <label for="lt_mu">摩擦系数 μ <span class="required">*</span></label>
            <input type="number" id="lt_mu" step="0.01" min="0" value="0.1" placeholder="例如: 0.1">
        </div>
        
        <div class="form-group">
            <label for="lt_PB">丝杠导程 P<sub>B</sub> (m) <span class="required">*</span></label>
            <input type="number" id="lt_PB" step="0.0001" min="0.0001" placeholder="例如: 0.01">
        </div>
        
        <div class="form-group">
            <label for="lt_eta">机械效率 η <span class="required">*</span></label>
            <input type="number" id="lt_eta" step="0.01" min="0" max="1" value="0.9" placeholder="例如: 0.9">
        </div>
        
        <button class="btn btn-primary" onclick="calculateLoadTorque()">计算</button>
        
        <div id="lt_result" class="result-box" style="display: none;">
            <h3>计算结果</h3>
            <div class="result-value">轴向负载 F: <span id="lt_F_value"></span> N</div>
            <div class="result-value">负载转矩 T<sub>L</sub>: <span id="lt_result_value"></span> <span id="lt_result_unit"></span></div>
            <div class="result-formula" id="lt_result_formula"></div>
        </div>
    </div>
</div>

<!-- 4. 克服惯量的加速转矩计算 -->
<div id="acceleration_torque" class="tab-content">
    <div class="tool-form">
        <h2>克服惯量的加速转矩计算（启动转矩）</h2>
        <p class="formula-info">直线运动平台惯量: J<sub>L1</sub> = M × (P<sub>B</sub>/(2π))²</p>
        <p class="formula-info">滚珠丝杠惯量: J<sub>B</sub> = (π/32) × ρ × L<sub>B</sub> × D<sub>B</sub>⁴</p>
        <p class="formula-info">连轴器惯量: J<sub>C</sub> = M<sub>C</sub> × D<sub>C</sub>² / 8</p>
        <p class="formula-info">总负荷惯量: J<sub>L</sub> = J<sub>L1</sub> + J<sub>B</sub> + J<sub>C</sub></p>
        <p class="formula-info">启动转矩: T<sub>S</sub> = (2π × N<sub>M</sub> × (J<sub>M</sub> + J<sub>L</sub>)) / (60 × t<sub>0</sub>)</p>
        <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 1rem; padding: 0.75rem; background: #e8f4f8; border-left: 4px solid #3498db; border-radius: 4px;">
            <strong>物理来源：</strong>基于转动惯量理论和角加速度关系。直线运动平台惯量J<sub>L1</sub> = M × (P<sub>B</sub>/(2π))²，将直线运动质量等效为旋转惯量。滚珠丝杠惯量J<sub>B</sub> = (π/32) × ρ × L<sub>B</sub> × D<sub>B</sub>⁴，基于实心圆柱体绕中心轴的转动惯量公式。连轴器惯量J<sub>C</sub> = M<sub>C</sub> × D<sub>C</sub>² / 8，基于薄圆盘绕中心轴的转动惯量公式。总负荷惯量J<sub>L</sub> = J<sub>L1</sub> + J<sub>B</sub> + J<sub>C</sub>，基于转动惯量的叠加原理。启动转矩T<sub>S</sub> = (2π × N<sub>M</sub> × (J<sub>M</sub> + J<sub>L</sub>)) / (60 × t<sub>0</sub>)，基于角加速度α = Δω/Δt和转矩T = J×α的关系，其中Δω = 2π×N<sub>M</sub>/60。这是标准转动惯量和角加速度理论。<br>
            <strong>适用范围：</strong>适用于需要计算加速转矩的丝杠传动系统，用于确定电机启动所需的转矩。
        </p>
        
        <div class="form-group">
            <label for="at_M">滑动部分质量 M (kg) <span class="required">*</span></label>
            <input type="number" id="at_M" step="0.01" min="0.01" placeholder="例如: 10">
        </div>
        
        <div class="form-group">
            <label for="at_PB">丝杠导程 P<sub>B</sub> (m) <span class="required">*</span></label>
            <input type="number" id="at_PB" step="0.0001" min="0.0001" placeholder="例如: 0.01">
        </div>
        
        <div class="form-group">
            <label for="at_LB">丝杠长度 L<sub>B</sub> (m) <span class="required">*</span></label>
            <input type="number" id="at_LB" step="0.01" min="0.01" placeholder="例如: 0.5">
        </div>
        
        <div class="form-group">
            <label for="at_DB">丝杠直径 D<sub>B</sub> (m) <span class="required">*</span></label>
            <input type="number" id="at_DB" step="0.0001" min="0.0001" placeholder="例如: 0.02">
        </div>
        
        <div class="form-group">
            <label for="at_MC">连轴器质量 M<sub>C</sub> (kg) <span class="required">*</span></label>
            <input type="number" id="at_MC" step="0.01" min="0.01" placeholder="例如: 0.5">
        </div>
        
        <div class="form-group">
            <label for="at_DC">连轴器直径 D<sub>C</sub> (m) <span class="required">*</span></label>
            <input type="number" id="at_DC" step="0.0001" min="0.0001" placeholder="例如: 0.05">
        </div>
        
        <div class="form-group">
            <label for="at_NM">电机转速 N<sub>M</sub> (rpm) <span class="required">*</span></label>
            <input type="number" id="at_NM" step="0.01" min="0.01" placeholder="例如: 500">
        </div>
        
        <div class="form-group">
            <label for="at_JM">电机惯量 J<sub>M</sub> (kg·m²) <span class="required">*</span></label>
            <input type="number" id="at_JM" step="0.0001" min="0.0001" value="0.0011" placeholder="例如: 0.0011">
        </div>
        
        <div class="form-group">
            <label for="at_t0">加速时间 t<sub>0</sub> (s) <span class="required">*</span></label>
            <input type="number" id="at_t0" step="0.01" min="0.01" placeholder="例如: 0.25">
        </div>
        
        <button class="btn btn-primary" onclick="calculateAccelerationTorque()">计算</button>
        
        <div id="at_result" class="result-box" style="display: none;">
            <h3>计算结果</h3>
            <div class="result-value">直线运动平台惯量 J<sub>L1</sub>: <span id="at_JL1_value"></span> kg·m²</div>
            <div class="result-value">滚珠丝杠惯量 J<sub>B</sub>: <span id="at_JB_value"></span> kg·m²</div>
            <div class="result-value">连轴器惯量 J<sub>C</sub>: <span id="at_JC_value"></span> kg·m²</div>
            <div class="result-value">总负荷惯量 J<sub>L</sub>: <span id="at_JL_value"></span> kg·m²</div>
            <div class="result-value">启动转矩 T<sub>S</sub>: <span id="at_result_value"></span> <span id="at_result_unit"></span></div>
            <div class="result-formula" id="at_result_formula"></div>
        </div>
    </div>
</div>

<!-- 5. 必须转矩 -->
<div id="required_torque" class="tab-content">
    <div class="tool-form">
        <h2>必须转矩计算</h2>
        <p class="formula-info">公式: T<sub>M</sub> = (T<sub>L</sub> + T<sub>S</sub>) × S</p>
        <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 1rem; padding: 0.75rem; background: #e8f4f8; border-left: 4px solid #3498db; border-radius: 4px;">
            <strong>物理来源：</strong>基于转矩叠加原理和工程安全设计原则。必须转矩T<sub>M</sub> = (T<sub>L</sub> + T<sub>S</sub>) × S，其中T<sub>L</sub>为克服负载所需的转矩，T<sub>S</sub>为克服系统惯量加速所需的转矩，两者叠加得到总需求转矩。安全系数S用于考虑计算误差、参数变化、负载波动等因素，确保系统可靠运行。这是标准机械设计中的安全设计方法。<br>
            <strong>适用范围：</strong>适用于电机选型计算，用于确定电机必须提供的转矩，确保系统能够可靠运行。
        </p>
        
        <div class="form-group">
            <label for="rt_TL">负载转矩 T<sub>L</sub> (Nm) <span class="required">*</span></label>
            <input type="number" id="rt_TL" step="0.0001" min="0" placeholder="例如: 0.0263">
        </div>
        
        <div class="form-group">
            <label for="rt_TS">启动转矩 T<sub>S</sub> (Nm) <span class="required">*</span></label>
            <input type="number" id="rt_TS" step="0.0001" min="0" placeholder="例如: 0.6591">
        </div>
        
        <div class="form-group">
            <label for="rt_S">安全系数 S <span class="required">*</span></label>
            <input type="number" id="rt_S" step="0.1" min="0.1" value="1" placeholder="例如: 1">
            <small>通常范围: 1-2</small>
        </div>
        
        <button class="btn btn-primary" onclick="calculateRequiredTorque()">计算</button>
        
        <div id="rt_result" class="result-box" style="display: none;">
            <h3>计算结果</h3>
            <div class="result-value"><span id="rt_result_value"></span> <span id="rt_result_unit"></span></div>
            <div class="result-formula" id="rt_result_formula"></div>
        </div>
    </div>
</div>

<!-- 6. 电机选择 -->
<div id="motor_selection" class="tab-content">
    <div class="tool-form">
        <h2>电机选择说明</h2>
        <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 1rem; padding: 0.75rem; background: #e8f4f8; border-left: 4px solid #3498db; border-radius: 4px;">
            <strong>说明：</strong>根据计算得到的必须转矩T<sub>M</sub>，初步确定电机型号，然后输入转子惯量，确认T<sub>M</sub>是否满足要求。
        </p>
        <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 1rem; padding: 0.75rem; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 4px;">
            <strong>注意：</strong>此模块为说明性内容，不进行具体计算。请根据前面计算的结果选择合适的电机。
        </p>
    </div>
</div>

<!-- 7. 负荷与电机惯量比 -->
<div id="inertia_ratio_motor" class="tab-content">
    <div class="tool-form">
        <h2>负荷与电机惯量比计算</h2>
        <p class="formula-info">公式: I<sub>1</sub> = J<sub>L</sub> / J<sub>M</sub></p>
        <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 1rem; padding: 0.75rem; background: #e8f4f8; border-left: 4px solid #3498db; border-radius: 4px;">
            <strong>物理来源：</strong>基于伺服系统惯量匹配理论。惯量比I<sub>1</sub> = J<sub>L</sub> / J<sub>M</sub>表示负载惯量与电机惯量的比值，用于评估系统的动态响应性能。当惯量比过大时，系统响应变慢，定位精度下降，可能出现振荡；当惯量比过小时，电机功率利用率低。通常建议I<sub>1</sub> ≤ 5，这是基于大量工程实践总结的经验值，确保系统具有良好的动态响应和稳定性。这是标准伺服系统设计理论。<br>
            <strong>适用范围：</strong>适用于伺服电机选型，用于评估负载与电机的惯量匹配情况，确保系统具有良好的动态性能。
        </p>
        
        <div class="form-group">
            <label for="irm_JL">总负荷惯量 J<sub>L</sub> (kg·m²) <span class="required">*</span></label>
            <input type="number" id="irm_JL" step="any" min="0.000001" placeholder="例如: 0.001889">
        </div>
        
        <div class="form-group">
            <label for="irm_JM">电机惯量 J<sub>M</sub> (kg·m²) <span class="required">*</span></label>
            <input type="number" id="irm_JM" step="any" min="0.0001" value="0.0011" placeholder="例如: 0.0011">
        </div>
        
        <button class="btn btn-primary" onclick="calculateInertiaRatioMotor()">计算</button>
        
        <div id="irm_result" class="result-box" style="display: none;">
            <h3>计算结果</h3>
            <div class="result-value">惯量比 I<sub>1</sub>: <span id="irm_result_value"></span></div>
            <div class="result-formula" id="irm_result_formula"></div>
            <div id="irm_warning" style="margin-top: 1rem; padding: 0.75rem; border-radius: 4px; display: none;"></div>
        </div>
    </div>
</div>

<!-- 8. 负荷与减速机惯量比 -->
<div id="inertia_ratio_reducer" class="tab-content">
    <div class="tool-form">
        <h2>负荷与减速机惯量比计算</h2>
        <p class="formula-info">公式: I<sub>2</sub> = J<sub>L</sub> / (J<sub>M</sub> × i²)</p>
        <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 1rem; padding: 0.75rem; background: #e8f4f8; border-left: 4px solid #3498db; border-radius: 4px;">
            <strong>物理来源：</strong>基于减速机对惯量的折算原理。当负荷与电机惯量比>5时，通过减速机可以降低折算到电机轴的负载惯量。折算后的惯量比I<sub>2</sub> = J<sub>L</sub> / (J<sub>M</sub> × i²)，其中i为减速比。这是因为减速机将负载惯量按i²的比例折算到电机轴，同时电机惯量保持不变。通过合理选择减速比，可以将折算后的惯量比降低到合理范围（通常≤5），提高系统的动态响应性能。这是标准减速机选型和惯量匹配理论。<br>
            <strong>适用范围：</strong>适用于需要减速机的丝杠传动系统，用于评估使用减速机后的惯量匹配情况。
        </p>
        
        <div class="form-group">
            <label for="irr_JL">总负荷惯量 J<sub>L</sub> (kg·m²) <span class="required">*</span></label>
            <input type="number" id="irr_JL" step="any" min="0.000001" placeholder="例如: 0.001889">
        </div>
        
        <div class="form-group">
            <label for="irr_JM">电机惯量 J<sub>M</sub> (kg·m²) <span class="required">*</span></label>
            <input type="number" id="irr_JM" step="any" min="0.0001" value="0.0011" placeholder="例如: 0.0011">
        </div>
        
        <div class="form-group">
            <label for="irr_i">减速机减速比 i <span class="required">*</span></label>
            <input type="number" id="irr_i" step="any" min="0.1" value="4" placeholder="例如: 4">
        </div>
        
        <button class="btn btn-primary" onclick="calculateInertiaRatioReducer()">计算</button>
        
        <div id="irr_result" class="result-box" style="display: none;">
            <h3>计算结果</h3>
            <div class="result-value">折算后的惯量比 I<sub>2</sub>: <span id="irr_result_value"></span></div>
            <div class="result-formula" id="irr_result_formula"></div>
        </div>
    </div>
</div>

<script src="/static/js/tools/screw_horizontal.js"></script>
{% endblock %}
