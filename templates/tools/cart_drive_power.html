{% extends "base.html" %}

{% block title %}小车驱动电机功率计算 - 电机电力电气计算工具站{% endblock %}

{% block content %}
<div class="page-header">
    <h1>小车驱动电机功率计算</h1>
    <p class="subtitle">计算小车驱动系统的电机功率，包括牵引力计算、电机功率计算和功率提升版本</p>
</div>

<!-- 参数说明表格 -->
<div class="reference-table" style="background: #e8f5e9; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; border: 1px solid #c8e6c9;">
    <div style="display: grid; grid-template-columns: 1fr 4px 1fr 4px 1fr; gap: 1rem; align-items: start;">
        <!-- 第一列 -->
        <div>
            <h3 style="color: #2c3e50; margin-bottom: 1rem; font-size: 1.1rem; font-weight: 600;">参数说明</h3>
            <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                <tr><td style="padding: 0.3rem 0;">m</td><td style="padding: 0.3rem 0;">质量(t)</td></tr>
                <tr><td style="padding: 0.3rem 0;">v</td><td style="padding: 0.3rem 0;">小车速度(m/min)</td></tr>
            </table>
        </div>
        <div style="background: #4caf50; width: 2px; height: 100%; border-radius: 1px;"></div>
        <!-- 第二列 -->
        <div>
            <h3 style="color: #2c3e50; margin-bottom: 1rem; font-size: 1.1rem; font-weight: 600;">参数说明</h3>
            <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                <tr><td style="padding: 0.3rem 0;">u</td><td style="padding: 0.3rem 0;">摩擦系数(一般取0.1)</td></tr>
                <tr><td style="padding: 0.3rem 0;">K</td><td style="padding: 0.3rem 0;">功率系数(1.2~2)</td></tr>
            </table>
        </div>
        <div style="background: #4caf50; width: 2px; height: 100%; border-radius: 1px;"></div>
        <!-- 第三列 -->
        <div>
            <h3 style="color: #2c3e50; margin-bottom: 1rem; font-size: 1.1rem; font-weight: 600;">参数说明</h3>
            <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                <tr><td style="padding: 0.3rem 0;">η</td><td style="padding: 0.3rem 0;">传动效率(默认0.8)</td></tr>
            </table>
        </div>
    </div>
    <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #c8e6c9; text-align: right;">
        <span style="color: #e74c3c; font-size: 0.9rem; font-weight: 500;">注: *为必填项</span>
    </div>
</div>

<!-- 计算表单 -->
<div class="tool-form">
    <h2>小车驱动电机功率计算</h2>
    <p class="formula-info">牵引力: F = u × m × g</p>
    <p class="formula-info">电机功率: P = F × v × K / (60 × η)</p>
    <p class="formula-info">功率提升版本: P<sub>1</sub> = P / 1.732</p>
    <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 1rem; padding: 0.75rem; background: #e8f4f8; border-left: 4px solid #3498db; border-radius: 4px;">
        <strong>物理来源：</strong>基于牛顿第二定律和功率公式。牵引力F = u×m×g，其中u为摩擦系数，m为质量(t)，g为重力加速度（取10m/s²），这是克服摩擦阻力所需的力。电机功率P = F×v×K/(60×η)，其中F为牵引力(kN)，v为小车速度(m/min)，K为功率系数（考虑加速能力，通常1.2~2），η为传动效率，除以60将速度从m/min转换为m/s。功率提升版本P<sub>1</sub> = P/1.732用于某些特殊应用场景（如三相系统）。这是标准机械传动理论。<br>
        <strong>适用范围：</strong>适用于小车驱动系统的电机功率计算，用于确定驱动电机所需的功率。适用于水平或接近水平的小车驱动系统，考虑摩擦阻力和传动效率的影响。
    </p>
    
    <div class="form-group">
        <label for="m">质量 m (t) <span class="required">*</span></label>
        <input type="number" id="m" step="0.1" min="0.1" value="1" placeholder="例如: 1">
    </div>
    
    <div class="form-group">
        <label for="v">小车速度 v (m/min) <span class="required">*</span></label>
        <input type="number" id="v" step="1" min="1" value="120" placeholder="例如: 120">
    </div>
    
    <div class="form-group">
        <label for="u">摩擦系数 u <span class="required">*</span></label>
        <input type="number" id="u" step="0.01" min="0" value="0.1" placeholder="例如: 0.1">
        <small>一般取0.1</small>
    </div>
    
    <div class="form-group">
        <label for="K">功率系数 K <span class="required">*</span></label>
        <input type="number" id="K" step="0.01" min="0.1" value="1.25" placeholder="例如: 1.25">
        <small>K=1.2~2，K越大，加速能力越强</small>
    </div>
    
    <div class="form-group">
        <label for="eta">传动效率 η <span class="required">*</span></label>
        <input type="number" id="eta" step="0.01" min="0" max="1" value="0.8" placeholder="例如: 0.8">
        <small>默认0.8</small>
    </div>
    
    <button class="btn btn-primary" onclick="calculateCartDrivePower()">计算</button>
    
    <div id="result" class="result-box" style="display: none;">
        <h3>计算结果</h3>
        <div class="result-value">牵引力 F: <span id="F_value"></span> kN</div>
        <div class="result-value">电机功率 P: <span id="P_value"></span> kW</div>
        <div class="result-value">功率提升版本 P<sub>1</sub>: <span id="P1_value"></span> kW</div>
        <div class="result-formula" id="result_formula"></div>
    </div>
</div>

<script src="{{ static_asset('js/tools/cart_drive_power.js') }}"></script>
{% endblock %}

